** PSKvie (1) **
* 
* NI Multisim to SPICE Netlist Export
* Generated by: levuo
* Mon, Jun 24, 2024 14:13:34 
*

*## Multisim Component S4 ##*
* !!!BEGIN-INTERACT
*  2.0 constant high
*  0.0 constant low
*  2   constant max_states
*  low VARIABLE volt
*
*  :MAP_KEYBOARD_INPUT ++++K1 1 ++++k1 -1 ;
*
*  : UPDATE_SETTINGS
*     *animation_state max_states  low  high  STATE  volt 
*     GRADUAL_CHANGE_AT_RUN  
*  ;
*
*  :KEYBOARD_INPUT locals| shift_state |
*     shift_state *animation_state max_states NEXT_STATE_WRAP
*                                             ==>_*animation_state
*     UPDATE_SETTINGS
*  ;
*
*  :GRADUAL_CHANGE_AT_RUN locals| ref value |
*     value  SET_INSTANCE Vsource ::V  V2 dc
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
*
*  : INIT_IMOUSE_OPTION
*    1 0 4 IMOUSE_SET
*  ;
*
*  : GET_IMOUSE_SUBCOMPS ( -- [iIdxN ... iIdx1] )
*    1
*  ;
*
*  : ON_SUBCOMP_IMOUSE_EVENT locals| eEventType nOptions iSubCompIdx |
*    eEventType 2 = if
*      -1
*      -1 KEYBOARD_INPUT
*    else
*      0
*    endif
*  ;
*
*  ( Initialize the settings )
*   UPDATE_SETTINGS
*   INIT_IMOUSE_OPTION
*
*  :BEGIN_ANALYSIS
*    UPDATE_SETTINGS
*  ; 
*
* !!!END-INTERACT

xS4 vc 5 data  SwitchS4 Params: Ron=0.0001 Roff=100000000

.subckt SwitchS4 1 2 3 Params: Ron=1e-8 Roff=1e30
V2 5 0 DC 0
R1 5 6 20
V1 6 0 DC 0
W0 2 1 V1 NC_contact 
W1 2 3 V1 NO_contact 
.MODEL NO_contact csw (IT=0.05 IH=0.025 RON={Ron} ROFF={Roff})
.MODEL NC_contact csw (IT=0.05 IH=0.025 RON={Roff} ROFF={Ron})
.ENDS

*## Multisim Component S2 ##*
* !!!BEGIN-INTERACT
*  2.0 constant high
*  0.0 constant low
*  2   constant max_states
*  low VARIABLE volt
*
*  :MAP_KEYBOARD_INPUT ++++K1 1 ++++k1 -1 ;
*
*  : UPDATE_SETTINGS
*     *animation_state max_states  low  high  STATE  volt 
*     GRADUAL_CHANGE_AT_RUN  
*  ;
*
*  :KEYBOARD_INPUT locals| shift_state |
*     shift_state *animation_state max_states NEXT_STATE_WRAP
*                                             ==>_*animation_state
*     UPDATE_SETTINGS
*  ;
*
*  :GRADUAL_CHANGE_AT_RUN locals| ref value |
*     value  SET_INSTANCE Vsource ::V  V2 dc
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
*
*  : INIT_IMOUSE_OPTION
*    1 0 4 IMOUSE_SET
*  ;
*
*  : GET_IMOUSE_SUBCOMPS ( -- [iIdxN ... iIdx1] )
*    1
*  ;
*
*  : ON_SUBCOMP_IMOUSE_EVENT locals| eEventType nOptions iSubCompIdx |
*    eEventType 2 = if
*      -1
*      -1 KEYBOARD_INPUT
*    else
*      0
*    endif
*  ;
*
*  ( Initialize the settings )
*   UPDATE_SETTINGS
*   INIT_IMOUSE_OPTION
*
*  :BEGIN_ANALYSIS
*    UPDATE_SETTINGS
*  ; 
*
* !!!END-INTERACT

xS2 PSK 4 5  SwitchS2 Params: Ron=0.0001 Roff=100000000

.subckt SwitchS2 1 2 3 Params: Ron=1e-8 Roff=1e30
V2 5 0 DC 0
R1 5 6 20
V1 6 0 DC 0
W0 2 1 V1 NC_contact 
W1 2 3 V1 NO_contact 
.MODEL NO_contact csw (IT=0.05 IH=0.025 RON={Ron} ROFF={Roff})
.MODEL NC_contact csw (IT=0.05 IH=0.025 RON={Roff} ROFF={Ron})
.ENDS

*## Multisim Instrument XSA2 ##*


*## Multisim Instrument XSC2 ##*


*## Multisim Instrument XSC1 ##*
XSC1 data PSK data_raw data_recover XSC1_OPEN_5 XSC1_OPEN_6 0 XXSC1_432044672

*## Multisim Component VCC ##*
VCCVCC  VCC 0 dc 5

*## Multisim Component R3 ##*
rR3 data_recover VCC 5000 vresR3  
.model vresR3 r(  )

*## Multisim Component VEE ##*
VEEVEE  VEE 0 dc -5

*## Multisim Component R2 ##*
* !!!BEGIN-INTERACT
*  : increment     ++++f4 ;
*  : setresistance ++++f6 ;
*  0.0             constant  mindval
*  100.0           constant  maxdval
*  0.0             VARIABLE  resistance
*  50.0            VARIABLE  setting
*  0.0             VARIABLE  setfactor
*  0.0             VARIABLE  zeroadj
*  0.0             VARIABLE  tresistance
*  0               VARIABLE  num_stored
*  0.0             VARIABLE  setresval
*  0	           VARIABLE  flag
*
*  :MAP_KEYBOARD_INPUT ++++k1 1 ++++K1  -1 ;
*
*  : UPDATE_SETTINGS
*      *flag 0 = if
*      LOAD_FICL_VARIABLES
*      ==>_*num_stored
*      ==>_*num_stored
*      *num_stored 0 > if
*         ==>_*setting 
*         ==>_*setresval
*         *setresval tresistance f./ ==>_*setfactor
*         *setresval SET_INSTANCE Resistor ::R R1  resistance
*         tresistance *setresval f.- SET_INSTANCE Resistor ::R R2  resistance
*      endif
*      1 ==>_*flag
*      endif
*      setresistance ==>_*tresistance
*      0.01 *setting f.* ==>_*zeroadj
*      *zeroadj PERCENT SET_ANIMATION_TEXT
*      0.0000001 0.9999999 *zeroadj f.min f.max  ==>_*setfactor
*      *setfactor *tresistance f.* resistance GRADUAL_CHANGE_AT_RUN
*      *setfactor tresistance f.* *setting 2 0
*      STORE_FICL_VARIABLES
*  ;
*
*  :GRADUAL_CHANGE_AT_RUN locals| ref value |
*    value                       SET_INSTANCE Resistor ::R R1  resistance
*    *tresistance  value f.-       SET_INSTANCE Resistor ::R R2  resistance
*  ;
*
*  :KEYBOARD_INPUT locals| shift_state |
*     shift_state (float) increment f.* *setting  f.+  ==>_*setting
*     mindval maxdval *setting f.min f.max ==>_*setting
*     UPDATE_SETTINGS
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
*
*
*  : INIT_SLIDER
*      maxdval mindval 3 IMOUSE_SET
*  ;
*
*  : ON_IMOUSE_EVENT locals| eType fValue |
*    eType 9 = if
*      -1
*      fValue ==>_*setting
*    else
*      0
*    endif
*    UPDATE_SETTINGS
*  ;
*
*  : GET_INTERACT_VALUE locals| eType |
*      eType 0 = if
*        *setting
*      else eType 1 = if
*        mindval
*      else eType 2 = if
*        maxdval
*      else eType 3 = if
*        increment
*      else
*        0
*      endif endif endif endif
*  ;
*
*  : SET_INTERACT_VALUE locals| eType fValue |
*      eType 0 = if
*        fValue ==>_*setting
*      endif
*      UPDATE_SETTINGS
*  ;
*
*  :ON_USER_UPDATE
*    UPDATE_SETTINGS
*    INIT_SLIDER
*  ;
*
*  :BEGIN_ANALYSIS
*    UPDATE_SETTINGS
*  ;
*
* !!!END-INTERACT
xR2 VCC 3 VEE  PotentiometerR2
.subckt PotentiometerR2 1 2 3
R1 1 2  1e-3
R2 2 3  1e-3
.ends

*## Multisim Component U1 ##*
xU1 data_raw 3 VCC 0 data_recover 0 LM311__COMPARATOR__1

*## Multisim Component C1 ##*
cC1 data_raw 0 1e-08

*## Multisim Component R1 ##*
rR1 1 data_raw 6800 vresR1  
.model vresR1 r(  )

*## Multisim Instrument XFG3 ##*
XFG3 XFG3_OPEN_3 0 2 XXFG3_432044672

*## Multisim Component A2 ##*
aA2 [PSK 2] 1 MultiplierA2
.model MultiplierA2 mult(
+ out_gain=1
+ out_offset=0
+ in_offset=[0 0]
+ in_gain=[1 1])

*## Multisim Component A1 ##*
aA1 [data vc] PSK MultiplierA1
.model MultiplierA1 mult(
+ out_gain=1
+ out_offset=0
+ in_offset=[0 0]
+ in_gain=[1 1])

*## Multisim Instrument XFG2 ##*
XFG2 XFG2_OPEN_3 0 vc XXFG2_432044672

*## Multisim Instrument XFG1 ##*
XFG1 XFG1_OPEN_3 0 data XXFG1_432044672


.subckt XXSC1_432044672 1 2 3 4 5 6 0
vScopeTK_sync 6 0 dc 0 ac 1 0 pulse(0, 5, 0, 1.e-9, 1.e-9, 0.0005, 0.001)
.ends

* LM311 VOLTAGE COMPARATOR "MACROMODEL" SUBCIRCUIT
* CREATED USING PARTS VERSION 4.03 ON 03/07/90 AT 08:15
* REV (N/A)
* CONNECTIONS:   NON-INVERTING INPUT
*                | INVERTING INPUT
*                | | POSITIVE POWER SUPPLY
*                | | | NEGATIVE POWER SUPPLY
*                | | | | OPEN COLLECTOR OUTPUT
*                | | | | | OUTPUT GROUND
*                | | | | | |
.SUBCKT LM311__COMPARATOR__1    1 2 3 4 5 6
  F1    9  3 V1 1
  IEE   3  7 DC 100.0E-6
  VI1  21  1 DC .45
  VI2  22  2 DC .45
  Q1    9 21  7 QIN
  Q2    8 22  7 QIN
  Q3    9  8  4 QMO
  Q4    8  8  4 QMI
.MODEL QIN PNP(IS=800.0E-18 BF=500)
.MODEL QMI NPN(IS=800.0E-18 BF=1002)
.MODEL QMO NPN(IS=800.0E-18 BF=1000 CJC=1E-15 TR=102.5E-9)
  E1   10  6  9  4  1
  V1   10 11 DC 0
  Q5    5 11  6 QOC
.MODEL QOC NPN(IS=800.0E-18 BF=103.5E3 CJC=1E-15 TF=11.60E-12 TR=48.19E-9)
  DP    4  3 DX
  RP    3  4 6.667E3
.MODEL DX  D(IS=800.0E-18)
.ENDS

.subckt XXFG1_432044672 1 2 3
vfgen_src_positive 3 2 dc 0.000000e+00 ac 5.000000000000000000e+00 pulse(-5.000000000000000000e+00 5.000000000000000000e+00 0 1.000000000000000021e-08 1.000000000000000021e-08 1.999900000000000148e-04 4.000000000000000192e-04)
vfgen_src_negative 2 1 dc 0.000000e+00 ac 5.000000000000000000e+00 pulse(-5.000000000000000000e+00 5.000000000000000000e+00 0 1.000000000000000021e-08 1.000000000000000021e-08 1.999900000000000148e-04 4.000000000000000192e-04)
.ends


.subckt XXFG3_432044672 1 2 3
vfgen_src_positive 3 2 dc 0.000000e+00 ac 1.000000000000000000e+00 sin(0.000000000000000000e+00 1.000000000000000000e+00 1.000000000000000000e+04 0)
vfgen_src_negative 2 1 dc 0.000000e+00 ac 1.000000000000000000e+00 sin(0.000000000000000000e+00 1.000000000000000000e+00 1.000000000000000000e+04 0)
.ends
.subckt XXFG2_432044672 1 2 3
vfgen_src_positive 3 2 dc 0.000000e+00 ac 1.000000000000000000e+00 sin(0.000000000000000000e+00 1.000000000000000000e+00 1.000000000000000000e+04 0)
vfgen_src_negative 2 1 dc 0.000000e+00 ac 1.000000000000000000e+00 sin(0.000000000000000000e+00 1.000000000000000000e+00 1.000000000000000000e+04 0)
.ends

